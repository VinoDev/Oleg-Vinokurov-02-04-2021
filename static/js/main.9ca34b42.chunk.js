(this["webpackJsonpoleg-vinokurov-02-04-2021"]=this["webpackJsonpoleg-vinokurov-02-04-2021"]||[]).push([[0],{100:function(e,t,r){},102:function(e,t,r){},103:function(e,t,r){},104:function(e,t,r){},106:function(e,t,r){},107:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n),c=r(7),o=r.n(c),s=r(14),u=(r(94),r(95),r(43)),i=r(13),l=(r(96),r(4)),p=function(){return Object(l.jsxs)("div",{className:"navbar",children:[Object(l.jsx)("span",{className:"brand",children:"Weather"}),Object(l.jsxs)("div",{className:"nav-links",children:[Object(l.jsx)(u.b,{to:"/Oleg-Vinokurov-02-04-2021",activeClassName:"active-link",children:"Home"}),Object(l.jsx)(u.b,{to:"/favourites",activeClassName:"active-link",children:"Favourites"})]})]})},d=(r(99),r(142)),f=(r(100),r(143)),h=r(140),j=r(73),v=r.n(j),m=function(e){var t=e.handleSubmit,r=e.handleChange,n=e.userInput;return Object(l.jsxs)("form",{className:"search-form",onSubmit:function(e){return t(e)},children:[Object(l.jsx)(f.a,{variant:"filled",label:"City",className:"search-field",value:n,onChange:function(e){return r(e)}}),Object(l.jsx)(h.a,{type:"submit",children:Object(l.jsx)(v.a,{})})]})},b=(r(102),r(103),function(e){var t=e.data;return Object(l.jsxs)("div",{className:"forecast-item",children:[Object(l.jsx)("span",{className:"forecast-day",children:t.day}),Object(l.jsx)("span",{children:t.maxTemp+"\xb0C"}),Object(l.jsx)("span",{className:"min-temp",children:t.minTemp+"\xb0C"})]})}),x=(r(104),r(141)),O=r(75),y=r.n(O),w=r(74),g=r.n(w),k=r(76),F=r(39),T=Object(F.b)({name:"favourites",initialState:{favourites:[]},reducers:{addToFavourites:function(e,t){e.favourites=[].concat(Object(k.a)(e.favourites),[t.payload])},removeFromFavourites:function(e,t){e.favourites=e.favourites.filter((function(e){return e.key!==t.payload}))}}}),N=function(){var e=Object(s.b)(),t=Object(s.c)((function(e){return e.weather})),r=t.city,n=t.key,a=t.weatherText,c=t.weatherIcon,o=t.temp,u=Object(s.c)((function(e){return e.favourites})).favourites,i=T.actions,l=i.addToFavourites,p=i.removeFromFavourites,d=u.some((function(e){return n===e.key}));return{handleFavourite:function(){e(d?p(n):l({key:n,city:r,weatherText:a,weatherIcon:c,temp:o}))},isFavorite:d}},S=function(){var e=N(),t=e.handleFavourite,r=e.isFavorite;return Object(l.jsx)("div",{className:"favorite-toggle",children:Object(l.jsx)(x.a,{onClick:t,children:r?Object(l.jsx)(g.a,{}):Object(l.jsx)(y.a,{})})})},A=function(){var e=Object(s.c)((function(e){return e.weather})),t=e.city,r=e.temp,n=e.forecast;return Object(l.jsxs)("div",{className:"weather-info",children:[Object(l.jsxs)("div",{className:"info-top",children:[Object(l.jsx)("div",{className:"current-city",children:Object(l.jsxs)("div",{className:"current-city-info",children:[Object(l.jsx)("span",{children:"".concat(t&&t)}),Object(l.jsx)("span",{children:"".concat(r&&r+" \xb0C")})]})}),Object(l.jsx)(S,{})]}),Object(l.jsx)("div",{className:"info-bottom",children:n.length>0&&n.map((function(e,t){return Object(l.jsx)(b,{data:{day:e.day,minTemp:e.minTemp,maxTemp:e.maxTemp}},t)}))})]})},C=r(16),D=r.n(C),I=r(47),E=r(21),q=r(77),M="s5E0TDfvzlrs2AZAXLCqqrgWo8DaMQ57",W=function(){var e=Object(E.a)(D.a.mark((function e(t){var r,n,a;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="http://dataservice.accuweather.com/currentconditions/v1/".concat(t,"?apikey=").concat(M),e.prev=1,e.next=4,fetch(r);case 4:return n=e.sent,e.next=7,n.json();case 7:return a=e.sent,e.abrupt("return",a[0]);case 11:throw e.prev=11,e.t0=e.catch(1),new Error(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}(),V=function(){var e=Object(E.a)(D.a.mark((function e(t){var r,n,a;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="http://dataservice.accuweather.com/forecasts/v1/daily/5day/".concat(t,"?apikey=").concat(M,"&metric=true"),e.prev=1,e.next=4,fetch(r);case 4:return n=e.sent,e.next=7,n.json();case 7:return a=e.sent,e.abrupt("return",a.DailyForecasts);case 11:throw e.prev=11,e.t0=e.catch(1),new Error(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}(),R=function(){var e=Object(E.a)(D.a.mark((function e(t){var r,n,a;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="http://dataservice.accuweather.com/locations/v1/cities/autocomplete?apikey=".concat(M,"&q=").concat(t),e.prev=1,e.next=4,fetch(r);case 4:return n=e.sent,e.next=7,n.json();case 7:return a=e.sent,e.abrupt("return",a);case 11:throw e.prev=11,e.t0=e.catch(1),new Error(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}(),z=Object(F.b)({name:"weather",initialState:{city:"",temp:"",weatherText:"",weatherIcon:"",key:"",forecast:[],loadingData:!1,loadingAutocomplete:!1,error:""},reducers:{weatherAndForecastRequest:function(e,t){e.loadingData=!0,e.error=""},weatherAndForecastSuccess:function(e,t){e.loadingData=!1,e.weatherText=t.payload.weatherText,e.weatherIcon=t.payload.weatherIcon,e.temp=t.payload.temp,e.forecast=t.payload.forecast,e.key=t.payload.key,e.city=t.payload.city},weatherAndForecastFail:function(e,t){e.loadingData=!1,e.error=t.payload},autocompleteRequest:function(e,t){e.loadingAutocomplete=!0,e.error=""},autocompleteSuccess:function(e,t){e.loadingAutocomplete=!1,e.key=t.payload.key,e.city=t.payload.city},autocompleteFail:function(e,t){e.loadingAutocomplete=!1,e.error=t.payload},clearError:function(e){e.error=""}}}),J=function(){var e=Object(s.b)(),t=z.actions,r=t.autocompleteRequest,n=t.autocompleteSuccess,a=t.autocompleteFail;return{handleAutocomplete:function(){var t=Object(E.a)(D.a.mark((function t(c){var o,s,u;return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e(r()),t.next=4,R(c);case 4:if(0!==(o=t.sent).length){t.next=8;break}return e(a("City not found.")),t.abrupt("return",!1);case 8:return s=o[0],u={key:s.Key,city:s.LocalizedName},e(n(u)),t.abrupt("return",u);case 14:t.prev=14,t.t0=t.catch(0),e(a("Something went wrong..."));case 17:case"end":return t.stop()}}),t,null,[[0,14]])})));return function(e){return t.apply(this,arguments)}}()}},L=function(e){return["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][new Date(e).getDay()]},B=function(){var e=Object(s.b)(),t=z.actions,r=t.weatherAndForecastRequest,n=t.weatherAndForecastSuccess,a=t.weatherAndForecastFail,c=function(){var t=Object(E.a)(D.a.mark((function t(c){var s,i,l,p,d;return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=c.key,i=c.city,t.prev=1,e(r()),t.next=5,o(s);case 5:return l=t.sent,t.next=8,u(s);case 8:p=t.sent,d=Object(I.a)(Object(I.a)({},l),{},{forecast:p,key:s,city:i}),e(n(d)),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(1),e(a("Something went wrong..."));case 16:case"end":return t.stop()}}),t,null,[[1,13]])})));return function(e){return t.apply(this,arguments)}}(),o=function(){var e=Object(E.a)(D.a.mark((function e(t){var r,n;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W(t);case 2:return r=e.sent,n={temp:r.Temperature.Metric.Value.toString(),weatherText:r.WeatherText,weatherIcon:r.WeatherIcon},e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),u=function(){var e=Object(E.a)(D.a.mark((function e(t){var r,n;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V(t);case 2:return r=e.sent,n=r.map((function(e){return{day:L(e.Date),minTemp:e.Temperature.Minimum.Value.toString(),maxTemp:e.Temperature.Maximum.Value.toString()}})),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return{getWeatherAndForecast:c}},H=function(){var e=Object(n.useState)(""),t=Object(q.a)(e,2),r=t[0],a=t[1],c=B().getWeatherAndForecast,o=J().handleAutocomplete;return{handleSubmit:function(){var e=Object(E.a)(D.a.mark((function e(t){var n;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t.preventDefault(),!r){e.next=14;break}return r.trim(),e.next=6,o(r);case 6:if(n=e.sent,a(""),!n.key){e.next=13;break}return c(Object(I.a)({},n)),e.abrupt("return",!0);case 13:return e.abrupt("return",!1);case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(0);case 18:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(t){return e.apply(this,arguments)}}(),handleChange:function(e){(""===e.target.value||/^[a-z_ ]+$/i.test(e.target.value))&&a(e.target.value)},userInput:r}},K=function(){var e=H(),t=e.handleSubmit,r=e.handleChange,a=e.userInput,c=B().getWeatherAndForecast,o=Object(s.c)((function(e){return e.weather})),u=o.loadingData,i=o.loadingAutocomplete,p=o.error;return Object(n.useEffect)((function(){c({key:"215854",city:"Tel Aviv"})}),[]),u||i?Object(l.jsx)("div",{className:"load-container",children:Object(l.jsx)(d.a,{})}):Object(l.jsxs)("div",{className:"home",children:[Object(l.jsx)(m,{handleSubmit:t,handleChange:r,userInput:a}),!p&&Object(l.jsx)(A,{})]})},Q=(r(106),function(){var e=Object(s.c)((function(e){return e.favourites})).favourites;return e.length>0?Object(l.jsx)("div",{className:"favourites",children:e.map((function(e){return Object(l.jsxs)("div",{className:"favorite-item",children:[Object(l.jsx)("span",{children:e.city}),Object(l.jsx)("span",{children:e.temp}),Object(l.jsx)("span",{children:e.weatherText})]},e.key)}))}):Object(l.jsx)("div",{className:"no-data-msg",children:"You have no favorite location saved."})}),X=r(54),Y=function(){var e=Object(X.b)().enqueueSnackbar;return{showErrorMessage:function(t){e(t,{variant:"error",preventDuplicate:!0})},error:Object(s.c)((function(e){return e.weather})).error}},Z=function(){var e=Y(),t=e.showErrorMessage,r=e.error;return Object(n.useEffect)((function(){r&&t(r)}),[r]),Object(l.jsx)("div",{className:"app",children:Object(l.jsxs)(u.a,{children:[Object(l.jsx)(p,{}),Object(l.jsx)(i.a,{path:"/Oleg-Vinokurov-02-04-2021",exact:!0,component:K}),Object(l.jsx)(i.a,{path:"/favourites",exact:!0,component:Q})]})})},$=r(19),_=Object($.c)({weather:z.reducer,favourites:T.reducer}),G=Object(F.a)({reducer:_});o.a.render(Object(l.jsx)(a.a.StrictMode,{children:Object(l.jsx)(s.a,{store:G,children:Object(l.jsx)(X.a,{maxSnack:3,children:Object(l.jsx)(Z,{})})})}),document.getElementById("root"))},94:function(e,t,r){},95:function(e,t,r){},96:function(e,t,r){},99:function(e,t,r){}},[[107,1,2]]]);
//# sourceMappingURL=main.9ca34b42.chunk.js.map