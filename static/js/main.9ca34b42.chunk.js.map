{"version":3,"sources":["components/Navbar.js","components/SearchForm.js","components/ForecastItem.js","state/favouritesSlice.js","hooks/useFavourite.js","components/FavoriteButton.js","components/WeatherInfo.js","api.js","state/weatherSlice.js","hooks/useAutocomplete.js","utils/dateToDay.js","hooks/useGetWeatherAndForecast.js","hooks/useForm.js","pages/Home.js","pages/Favourites.js","hooks/useErrorHandler.js","App.js","store.js","index.js"],"names":["Navbar","className","to","activeClassName","SearchForm","handleSubmit","handleChange","userInput","onSubmit","e","TextField","variant","label","value","onChange","Button","type","ForecastItem","data","day","maxTemp","minTemp","favouritesSlice","createSlice","name","initialState","favourites","reducers","addToFavourites","state","action","payload","removeFromFavourites","filter","favorite","key","useFavourite","dispatch","useDispatch","useSelector","weather","city","weatherText","weatherIcon","temp","actions","isFavorite","some","handleFavourite","FavoriteButton","useFavorite","IconButton","onClick","WeatherInfo","forecast","length","map","dayForecast","index","API_KEY","process","fetchWeather","locationKey","a","url","fetch","res","json","Error","fetchForecast","DailyForecasts","autocompleteSearch","query","weatherSlice","loadingData","loadingAutocomplete","error","weatherAndForecastRequest","weatherAndForecastSuccess","weatherAndForecastFail","autocompleteRequest","autocompleteSuccess","autocompleteFail","clearError","useAutocomplete","CurrentLocationSlice","handleAutocomplete","results","mostRelevantResult","cityData","Key","LocalizedName","dateToDay","date","Date","getDay","useGetWeatherAndForecast","getWeatherAndForecast","handleWeatherData","handleForecastData","result","weatherData","Temperature","Metric","Value","toString","WeatherText","WeatherIcon","forecastData","Minimum","Maximum","useForm","useState","setUserInput","preventDefault","trim","target","test","Home","useEffect","CircularProgress","Favourites","useErrorHandler","enqueueSnackbar","useSnackbar","showErrorMessage","preventDuplicate","App","path","exact","component","rootReducer","combineReducers","reducer","store","configureStore","ReactDOM","render","StrictMode","maxSnack","document","getElementById"],"mappings":"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","file":"static/js/main.9ca34b42.chunk.js","sourcesContent":["import './navbar.css';\r\nimport { NavLink } from 'react-router-dom';\r\n\r\nconst Navbar = () => {\r\n  return (\r\n      <div className=\"navbar\">\r\n        <span className=\"brand\">Weather</span>\r\n        <div className=\"nav-links\">\r\n          <NavLink to=\"/Oleg-Vinokurov-02-04-2021\" activeClassName=\"active-link\">Home</NavLink>\r\n          <NavLink to=\"/favourites\" activeClassName=\"active-link\">Favourites</NavLink>\r\n        </div>\r\n      </div>\r\n  );\r\n}\r\n\r\nexport default Navbar;\r\n","import './searchForm.css';\r\nimport { TextField, Button } from \"@material-ui/core\";\r\nimport SearchIcon from '@material-ui/icons/Search';\r\n\r\nconst SearchForm = ({handleSubmit, handleChange, userInput}) => {\r\n\r\n    return (\r\n        <form className=\"search-form\" onSubmit={e=>handleSubmit(e)}>\r\n            <TextField\r\n              variant=\"filled\"  \r\n              label=\"City\"\r\n              className=\"search-field\"\r\n              value={userInput}\r\n              onChange={(e)=>handleChange(e)}\r\n            />\r\n            <Button type=\"submit\">\r\n                <SearchIcon/>\r\n            </Button>\r\n        </form>  \r\n    );\r\n    \r\n}\r\n\r\nexport default SearchForm;\r\n","import './forecast-item.css';\r\n\r\n\r\nconst ForecastItem = ({data}) => {\r\n\r\n  return (\r\n    <div className=\"forecast-item\">\r\n        <span className=\"forecast-day\">\r\n            {data.day}\r\n        </span>\r\n        <span>\r\n            {data.maxTemp+\"°C\"}\r\n        </span>\r\n        <span className=\"min-temp\">\r\n            {data.minTemp+\"°C\"}\r\n        </span>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ForecastItem;\r\n","import { createSlice } from \"@reduxjs/toolkit\";\r\n\r\nconst initialState = {\r\n    favourites: []\r\n}\r\n\r\nconst favouritesSlice = createSlice({\r\n  name: \"favourites\",\r\n  initialState: initialState,\r\n  reducers: {\r\n    addToFavourites: (state, action) => {\r\n        state.favourites = [...state.favourites, action.payload];\r\n    },\r\n    removeFromFavourites: (state, action) => {\r\n        state.favourites = state.favourites.filter((favorite) => {\r\n            return favorite.key !== action.payload;\r\n        });    \r\n    },\r\n  },\r\n});\r\n\r\nexport default favouritesSlice;\r\n","import { useDispatch, useSelector } from \"react-redux\";\r\nimport favouritesSlice from '../state/favouritesSlice';\r\n\r\nconst useFavourite = () => {\r\n\r\n    const dispatch = useDispatch();\r\n    const { city, key, weatherText, weatherIcon, temp } = useSelector((state) => state.weather);\r\n    const { favourites } = useSelector((state) => state.favourites);\r\n\r\n    const { \r\n        addToFavourites,\r\n        removeFromFavourites\r\n    } = favouritesSlice.actions;\r\n\r\n    const isFavorite = favourites.some((favorite) => key === favorite.key);\r\n\r\n    const handleFavourite = () => {\r\n        if(isFavorite) {\r\n            dispatch(removeFromFavourites(key))\r\n        } else {\r\n            dispatch(addToFavourites({ key, city, weatherText, weatherIcon, temp }))\r\n        }\r\n    }\r\n\r\n    return { handleFavourite, isFavorite }\r\n\r\n}\r\n\r\nexport default useFavourite;","import './favoriteButton.css'\r\nimport { IconButton } from \"@material-ui/core\";\r\nimport FavoriteBorderIcon from '@material-ui/icons/FavoriteBorder';\r\nimport FavoriteIcon from '@material-ui/icons/Favorite';\r\nimport { useSelector } from \"react-redux\";\r\nimport useFavorite from '../hooks/useFavourite.js';\r\n\r\nconst FavoriteButton = () => {\r\n\r\n    const { handleFavourite, isFavorite } = useFavorite();\r\n\r\n    return (\r\n        <div className=\"favorite-toggle\">\r\n            <IconButton onClick={handleFavourite}>\r\n                {\r\n                    isFavorite ? <FavoriteIcon/> : <FavoriteBorderIcon/>\r\n                }\r\n            </IconButton>\r\n        </div>    \r\n    )\r\n}\r\n\r\nexport default FavoriteButton","import './weather-info.css';\r\nimport ForecastItem from './ForecastItem.js';\r\nimport { useSelector } from \"react-redux\";\r\nimport FavoriteButton from './FavoriteButton.js';\r\n\r\nconst WeatherInfo = () => {\r\n\r\n    const { city, temp, forecast } = useSelector((state) => state.weather);\r\n\r\n    return (\r\n        <div className=\"weather-info\">\r\n\r\n            <div className=\"info-top\">\r\n                \r\n                <div className=\"current-city\">\r\n                    {/* <div className=\"icon-demo\"></div> */}\r\n                    <div className=\"current-city-info\">\r\n                        <span>{`${city && city}`}</span>\r\n                        <span>{`${temp && temp+\" °C\"}`}</span>\r\n                    </div>\r\n                </div>\r\n\r\n                <FavoriteButton/>\r\n\r\n            </div>\r\n            <div className=\"info-bottom\">\r\n                {forecast.length > 0 && forecast.map((dayForecast, index) => {\r\n                    return (\r\n                        <ForecastItem \r\n                            key={index}\r\n                            data={{\r\n                                day: dayForecast.day,\r\n                                minTemp: dayForecast.minTemp,\r\n                                maxTemp: dayForecast.maxTemp\r\n                            }}\r\n                        /> \r\n                    )                       \r\n                })}              \r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default WeatherInfo;\r\n","const API_KEY = process.env.REACT_APP_API_KEY;\r\n\r\nexport const fetchWeather = async (locationKey) => {\r\n\r\n    const url = `http://dataservice.accuweather.com/currentconditions/v1/${locationKey}?apikey=${API_KEY}`\r\n    try {\r\n\r\n        const res = await fetch(url);\r\n        const data = await res.json();\r\n\r\n        return data[0];\r\n    } catch (error) {\r\n        throw new Error(error)\r\n    }\r\n}\r\n\r\nexport const fetchForecast = async (locationKey) => {\r\n    const url = `http://dataservice.accuweather.com/forecasts/v1/daily/5day/${locationKey}?apikey=${API_KEY}&metric=true`\r\n    try {\r\n        const res = await fetch(url);\r\n        const data = await res.json();\r\n\r\n        return data.DailyForecasts\r\n    } catch (error) {\r\n        throw new Error(error)\r\n    }\r\n}\r\n\r\nexport const autocompleteSearch = async (query) => {\r\n    const url = `http://dataservice.accuweather.com/locations/v1/cities/autocomplete?apikey=${API_KEY}&q=${query}`\r\n    try {\r\n        const res = await fetch(url);\r\n        let data = await res.json();\r\n\r\n        return data \r\n    } catch (error) {\r\n        throw new Error(error)\r\n    }\r\n}","import { createSlice } from \"@reduxjs/toolkit\";\r\n\r\nconst initialState = {\r\n  city: \"\",\r\n  temp: \"\",\r\n  weatherText: \"\",\r\n  weatherIcon: \"\",\r\n  key: \"\",\r\n  forecast: [],\r\n  loadingData: false,\r\n  loadingAutocomplete: false,\r\n  error: \"\"\r\n}\r\n\r\nconst weatherSlice = createSlice({\r\n  name: \"weather\",\r\n  initialState: initialState,\r\n  reducers: {\r\n    weatherAndForecastRequest: (state, action) => {\r\n      state.loadingData = true;\r\n      state.error = \"\";\r\n    },\r\n    weatherAndForecastSuccess: (state, action) => {\r\n      state.loadingData = false;\r\n      state.weatherText = action.payload.weatherText;\r\n      state.weatherIcon = action.payload.weatherIcon;\r\n      state.temp = action.payload.temp;\r\n      state.forecast = action.payload.forecast;\r\n      state.key = action.payload.key\r\n      state.city = action.payload.city\r\n    },\r\n    weatherAndForecastFail: (state, action) => {\r\n      state.loadingData = false;\r\n      state.error = action.payload\r\n    },\r\n    autocompleteRequest: (state, action) => {\r\n      state.loadingAutocomplete = true;\r\n      state.error = \"\";\r\n    },\r\n    autocompleteSuccess: (state, action) => {\r\n      state.loadingAutocomplete = false;\r\n      state.key = action.payload.key\r\n      state.city = action.payload.city\r\n    },\r\n    autocompleteFail: (state, action) => {\r\n      state.loadingAutocomplete = false;\r\n      state.error = action.payload\r\n    },\r\n    clearError: (state) => {\r\n      state.error = ''\r\n    }\r\n  },\r\n});\r\n\r\nexport default weatherSlice;\r\n","import { autocompleteSearch } from '../api.js';\r\nimport CurrentLocationSlice from '../state/weatherSlice.js';\r\nimport { useDispatch } from \"react-redux\";\r\n\r\nconst useAutocomplete = () => {\r\n\r\n    const dispatch = useDispatch();\r\n    const { \r\n        autocompleteRequest,\r\n        autocompleteSuccess,\r\n        autocompleteFail,\r\n    } = CurrentLocationSlice.actions;\r\n    \r\n    const handleAutocomplete = async (userInput) => {\r\n        try {\r\n            dispatch(autocompleteRequest())\r\n\r\n            const results = await autocompleteSearch(userInput);\r\n    \r\n            if(results.length === 0) {\r\n                dispatch(autocompleteFail(`City not found.`))\r\n                return false\r\n            }\r\n\r\n            const mostRelevantResult = results[0];\r\n            const cityData = {key: mostRelevantResult.Key, city: mostRelevantResult.LocalizedName}\r\n\r\n            dispatch(autocompleteSuccess(cityData))\r\n            \r\n            return cityData;   \r\n        } catch (error) {\r\n            dispatch(autocompleteFail(\"Something went wrong...\"))\r\n        }\r\n    }\r\n\r\n    return { handleAutocomplete }\r\n}\r\n\r\nexport default useAutocomplete;","\r\nconst dateToDay = (date) => {\r\n    const days = ['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'];\r\n    const dateObj = new Date(date);\r\n    \r\n    return days[dateObj.getDay()];\r\n}\r\n\r\nexport default dateToDay","import { useDispatch } from \"react-redux\";\r\nimport { fetchWeather, fetchForecast } from '../api.js';\r\nimport weatherSlice from '../state/weatherSlice.js';\r\nimport dateToDay from '../utils/dateToDay.js';\r\n\r\nconst useGetWeatherAndForecast = () => {\r\n    \r\n    const dispatch = useDispatch();\r\n    const { \r\n        weatherAndForecastRequest,\r\n        weatherAndForecastSuccess,\r\n        weatherAndForecastFail\r\n    } = weatherSlice.actions;\r\n\r\n    const getWeatherAndForecast = async ({key, city}) => {\r\n        try {\r\n\r\n            dispatch(weatherAndForecastRequest());\r\n\r\n            const weather = await handleWeatherData(key);\r\n            const forecast = await handleForecastData(key);\r\n\r\n            const data = {...weather, forecast, key, city}\r\n            \r\n            dispatch(weatherAndForecastSuccess(data))\r\n\r\n        } catch (error) {\r\n            dispatch(weatherAndForecastFail(\"Something went wrong...\"))\r\n        }\r\n    }\r\n\r\n    const handleWeatherData = async (key) => {\r\n        const result = await fetchWeather(key);\r\n\r\n        const weatherData = {\r\n            temp: result.Temperature.Metric.Value.toString(),\r\n            weatherText: result.WeatherText,\r\n            weatherIcon: result.WeatherIcon\r\n        }\r\n\r\n        return weatherData;\r\n    }\r\n\r\n    const handleForecastData = async (key) => {\r\n        const result = await fetchForecast(key);\r\n\r\n        const forecastData = result.map(dayForecast => {\r\n\r\n            return {\r\n                day: dateToDay(dayForecast.Date),\r\n                minTemp: dayForecast.Temperature.Minimum.Value.toString(),\r\n                maxTemp: dayForecast.Temperature.Maximum.Value.toString()\r\n            }\r\n        })\r\n\r\n        return forecastData;\r\n    }\r\n\r\n    return { getWeatherAndForecast }\r\n}\r\n\r\nexport default useGetWeatherAndForecast;","import { useState } from 'react';\r\nimport useAutocomplete from '../hooks/useAutocomplete.js';\r\nimport useGetWeatherAndForecast from '../hooks/useGetWeatherAndForecast.js';\r\n\r\nconst useForm = () => {\r\n\r\n    const [ userInput, setUserInput ] = useState('');\r\n    const { getWeatherAndForecast } = useGetWeatherAndForecast();\r\n    const { handleAutocomplete } = useAutocomplete();\r\n\r\n    const handleChange = (e) => {\r\n        const regex = /^[a-z_ ]+$/i\r\n        if(e.target.value === '' || regex.test(e.target.value)){\r\n            setUserInput(e.target.value)\r\n        }\r\n    }\r\n\r\n    const handleSubmit = async (e) => {\r\n        try {\r\n            e.preventDefault()\r\n            if(userInput){\r\n                userInput.trim();\r\n\r\n                const cityData = await handleAutocomplete(userInput);\r\n                setUserInput('');\r\n                \r\n                if(cityData.key){\r\n                    getWeatherAndForecast({...cityData})\r\n                    return true\r\n                } else {\r\n                    return false\r\n                }\r\n            } \r\n        } catch (error) {\r\n\r\n        }\r\n    }\r\n\r\n    return { handleSubmit, handleChange, userInput }\r\n    \r\n}\r\n\r\nexport default useForm;\r\n","import './home.css';\r\nimport { CircularProgress } from \"@material-ui/core\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { useEffect } from 'react';\r\nimport SearchForm from '../components/SearchForm.js'\r\nimport WeatherInfo from '../components/WeatherInfo.js'\r\nimport useForm from \"../hooks/useForm.js\";\r\nimport useGetWeatherAndForecast from '../hooks/useGetWeatherAndForecast.js'\r\n\r\nconst Home = () => {\r\n\r\n    const { handleSubmit, handleChange, userInput } = useForm();\r\n    const { getWeatherAndForecast } = useGetWeatherAndForecast();\r\n    const { loadingData, loadingAutocomplete, error } = useSelector((state) => state.weather);  \r\n\r\n    useEffect(()=>{\r\n        const initCity = {key: \"215854\", city: \"Tel Aviv\"}\r\n        getWeatherAndForecast(initCity)\r\n    }, [])   \r\n\r\n    if( loadingData || loadingAutocomplete ) {\r\n        return (\r\n          <div className=\"load-container\">\r\n            <CircularProgress/>\r\n          </div>\r\n        )\r\n    } else {\r\n        return (\r\n            <div className=\"home\">\r\n                <SearchForm handleSubmit={handleSubmit} handleChange={handleChange} userInput={userInput} />\r\n                {!error && <WeatherInfo/>}\r\n            </div>\r\n        );\r\n    }\r\n    \r\n}\r\n\r\nexport default Home;\r\n","import './favourites.css'\r\nimport { useSelector } from \"react-redux\";\r\n\r\nconst Favourites = () => {\r\n\r\n    const { favourites } = useSelector((state) => state.favourites);\r\n\r\n    if(favourites.length > 0) {\r\n        return (\r\n            <div className=\"favourites\">\r\n                {\r\n                    favourites.map((favorite) => {\r\n                        return (\r\n                            <div className=\"favorite-item\" key={favorite.key}>\r\n                                <span>{favorite.city}</span>\r\n                                <span>{favorite.temp}</span>\r\n                                <span>{favorite.weatherText}</span>\r\n                                {/* <span>{favorite.weatherIcon}</span> */}\r\n                            </div>\r\n                        )\r\n                    })\r\n                }\r\n            </div>\r\n        );\r\n    } else {\r\n        return (\r\n            <div className=\"no-data-msg\">\r\n                You have no favorite location saved.\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Favourites;\r\n","import { useDispatch } from \"react-redux\";\r\nimport { useSnackbar } from 'notistack';\r\nimport { useSelector } from \"react-redux\";\r\nimport weatherSlice from '../state/weatherSlice.js';\r\n\r\nconst useErrorHandler = () => {\r\n\r\n    const { enqueueSnackbar } = useSnackbar();\r\n    const { error } = useSelector((state) => state.weather);\r\n\r\n    const showErrorMessage = (error) => {\r\n        enqueueSnackbar(error, {variant: \"error\", preventDuplicate: true})\r\n    }\r\n\r\n    return {showErrorMessage, error}\r\n}\r\n\r\nexport default useErrorHandler","import './app.css';\r\nimport { BrowserRouter, Route } from 'react-router-dom';\r\nimport Navbar from './components/Navbar.js';\r\nimport Home from './pages/Home.js';  \r\nimport Favourites from './pages/Favourites.js';\r\nimport { useEffect } from 'react';\r\nimport useErrorHandler from './hooks/useErrorHandler.js'\r\n\r\nconst App = () => {\r\n\r\n  const { showErrorMessage, error } = useErrorHandler()\r\n  \r\n  useEffect(()=>{\r\n    error && showErrorMessage(error)\r\n  }, [error])\r\n\r\n  return (\r\n    <div className=\"app\">\r\n      <BrowserRouter>\r\n        <Navbar/>\r\n        <Route path=\"/Oleg-Vinokurov-02-04-2021\" exact={true} component={Home}/>\r\n        <Route path=\"/favourites\" exact={true} component={Favourites}/>\r\n      </BrowserRouter>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default App;\r\n","import {combineReducers} from 'redux';\r\nimport {configureStore} from \"@reduxjs/toolkit\"\r\nimport weatherSlice from './state/weatherSlice.js';\r\nimport favouritesSlice from './state/favouritesSlice.js';\r\n\r\nconst rootReducer = combineReducers({\r\n    weather: weatherSlice.reducer,\r\n    favourites: favouritesSlice.reducer\r\n})\r\n\r\nconst store = configureStore({\r\n    reducer: rootReducer\r\n})\r\n\r\nexport default store;","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { Provider } from \"react-redux\";\r\nimport './index.css';\r\nimport App from './App';\r\nimport store from './store.js';\r\nimport { SnackbarProvider } from 'notistack';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <Provider store={store}>\r\n      <SnackbarProvider maxSnack={3}>\r\n        <App />\r\n      </SnackbarProvider>      \r\n    </Provider>\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n"],"sourceRoot":""}